<!DOCTYPE html>
<html>
<head>
    <title>Typing Speed Test</title>
</head>
<body>
    <div style="text-align: center;">
        <a href="index.html">Home</a> |
    </div>
    <h1>Typing Speed Test</h1>
    <p>Enter your own paragraph (up to 500 characters) and start typing to test your typing speed:</p>
    <textarea id="inputArea" rows="8" cols="60" placeholder="Type here..."></textarea>
    <button onclick="startTest()">Start Test</button>

    <p id="testResult"></p>

    <script>
        function startTest() {
            const userParagraph = document.getElementById("inputArea").value.trim();
            const wordLimit = 500;

            if (userParagraph.length === 0) {
                alert("Please enter a paragraph to start the test.");
                return;
            }

            if (userParagraph.length > wordLimit) {
                alert("Please enter a paragraph up to 500 characters.");
                return;
            }

            const timer = setTimeout(() => {
                calculateResult(userParagraph);
            }, 30000); // Adjust the time limit here (e.g., 5000 for 5 seconds, 10000 for 10 seconds, etc.).

            document.getElementById("inputArea").readOnly = false;
            document.getElementById("inputArea").focus();

            document.getElementById("testResult").innerHTML = "";

            document.getElementById("inputArea").addEventListener("input", function () {
                if (this.value === userParagraph) {
                    clearTimeout(timer);
                    calculateResult(userParagraph);
                }
            });
        }

        function calculateResult(userParagraph) {
            const originalParagraph = userParagraph;
            const userTypedText = document.getElementById("inputArea").value.trim();
            const wordsTyped = userTypedText.split(' ');
            const wordsOriginal = originalParagraph.split(' ');

            let correctWords = 0;
            for (let i = 0; i < wordsTyped.length; i++) {
                if (i < wordsOriginal.length && wordsTyped[i] === wordsOriginal[i]) {
                    correctWords++;
                }
            }

            const accuracy = (correctWords / wordsTyped.length) * 100;
            const totalCharacters = userTypedText.length;
            const typingSpeed = Math.floor((totalCharacters / 5) / (30 / 60)); // Assuming an average word has 5 characters and time limit is 30 seconds.

            document.getElementById("inputArea").readOnly = true;
            document.getElementById("testResult").innerHTML = `Your typing speed: ${typingSpeed} words per minute (WPM)<br>Accuracy: ${accuracy.toFixed(2)}%`;
        }
    </script>
</body>
</html>
